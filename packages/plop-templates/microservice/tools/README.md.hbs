# Modern API Documentation Tools

This directory contains modern, high-performance tools for automatically generating API documentation using **Fastify's native OpenAPI support** and comprehensive Postman collections.

## ğŸš€ Features

- âœ… **Native Performance**: Uses Fastify's built-in OpenAPI generation for optimal speed
- âœ… **Zero Configuration**: Works out-of-the-box with Fastify schema definitions
- âœ… **Comprehensive**: Generates OpenAPI specs, Postman collections, and API summaries
- âœ… **Modern Standards**: OpenAPI 3.0+ compliance with rich examples
- âœ… **Developer Experience**: Interactive Swagger UI with test capabilities
- âœ… **Automated Testing**: Generated Postman collections include test scripts

## ğŸ“ Structure

```
tools/
â”œâ”€â”€ README.md                # This documentation
â”œâ”€â”€ config.js                # Configuration settings
â”œâ”€â”€ docs-generator.js        # Main unified generator
â”œâ”€â”€ swagger-generator.js     # OpenAPI spec generator (Fastify native)
â””â”€â”€ postman-generator.js     # Comprehensive Postman collection generator
```

## ğŸ”§ Available Scripts

```bash
# Generate all documentation (recommended)
npm run docs:generate

# Generate only OpenAPI specification  
npm run docs:swagger

# Generate only Postman collection
npm run docs:postman

# Auto-regenerate docs on file changes
npm run docs:watch

# Generate docs and start development server
npm run docs:dev
```

## ğŸ“– How It Works

### 1. **OpenAPI Generation** (`swagger-generator.js`)
- Extracts OpenAPI spec directly from Fastify server instance
- Uses native `fastify.swagger()` method for maximum accuracy
- Generates enhanced documentation with examples and summaries
- Creates additional files: `api-summary.json` and `endpoints-list.json`

### 2. **Postman Collection** (`postman-generator.js`)
- Converts OpenAPI specification to comprehensive Postman collection
- Groups endpoints by tags for better organization
- Includes automatic test scripts for common validations
- Provides environment variables and example requests
- Supports complex schemas with proper examples

### 3. **Unified Generation** (`docs-generator.js`)
- Orchestrates both OpenAPI and Postman generation
- Provides comprehensive logging and error handling
- Ensures consistency between documentation formats

## ğŸ¯ Usage

### Basic Usage
```bash
npm run docs:generate
```

### Development Workflow
```bash
# Start with fresh documentation
npm run docs:dev

# Or watch for changes during development
npm run docs:watch
```

### Generated Files
- `./docs/swagger-output.json` - OpenAPI 3.0 specification
- `./docs/comments-api.postman_collection.json` - Postman collection
- `./docs/api-summary.json` - API overview and statistics
- `./docs/endpoints-list.json` - Structured endpoint list

## ğŸ”§ Configuration

Modify `config.js` to customize:
- Output file paths
- API information (title, description, version)
- Server configurations
- Contact and license information

## ğŸ† Benefits vs Previous Approach

| Feature | Old (Hybrid) | New (Native) |
|---------|-------------|--------------|
| **Performance** | Slower (external parsing) | âš¡ Faster (native) |
| **Accuracy** | Sometimes inconsistent | âœ… Always accurate |
| **Maintenance** | Complex hybrid logic | ğŸ¯ Simple and reliable |
| **Dependencies** | swagger-autogen + swagger-jsdoc | ğŸ“¦ Zero external deps |
| **Standards** | Mixed approach | ğŸ… Pure OpenAPI 3.0+ |

## ğŸš€ Integration

The documentation system integrates seamlessly with:
- **Fastify Server**: Native schema-to-docs conversion
- **Development Workflow**: Auto-regeneration on changes  
- **CI/CD**: Can be run in build pipelines
- **Testing**: Postman collections ready for automated testing

## ğŸ’¡ Best Practices

1. **Schema-First**: Define comprehensive JSON schemas in your routes
2. **Examples**: Include example values in your schemas for better docs
3. **Descriptions**: Add meaningful descriptions to routes and parameters
4. **Tags**: Use consistent tags to organize endpoints
5. **Validation**: The generated docs reflect your actual validation rules

## ğŸ› Troubleshooting

- **Generation fails**: Ensure your Fastify server can start successfully
- **Missing endpoints**: Check that routes are properly registered
- **Invalid JSON**: Verify your JSON schemas are valid
- **Import issues**: Make sure all dependencies are installed
